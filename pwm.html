<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A website that contains links and descriptions to my personal projects">
    <meta name="author" content="Devon Andrade">

    <title>Verilog PWM IP</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/simple-sidebar.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="index.html">
                        Projects and Tinkerings
                    </a>
                </li>
				<li>
					<a href="seniorproject.html">2D Graphics Accelerator IP</a>
				</li>
                <li>
                    <a href="feartracker.html">Fear Tracker</a>
                </li>
				<li>
					<a href="musicplayer.html">Custom Music Player</a>
				</li>
				<li>
					<a href="embeddedlinux.html">Embedded Linux Beginner's Guide</a>
				</li>
                <li>
                    <a href="pacman.html">Pacman on LED Matrix</a>
                </li>
				<li>
					<a href="linuxsystems.html">Linux Systems Programming</a>
				</li>
                <li>
                    <a href="verilog_spi.html">Verilog SPI Master</a>
                </li>
                <li>
                    <a href="homebrew.html">Homebrew Video Games</a>
                </li>
				<li>
					<a href="pwm.html">Pulse Width Modulation IP</a>
				</li>
                <li>
                    <a href="cpld.html">Custom CPLD Dev Board</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
						<h2>Pulse Width Modulation IP</h2>
						<h4>A PWM IP core written in Verilog, along with firmware (designed for the Xilinx Zynq-7000 SoC)</h4>
						<h4>Source Code Link: <a href="https://github.com/andrade824/Pulse-Width-Modulation-IP" target="_blank">https://github.com/andrade824/Pulse-Width-Modulation-IP</a></h4>
						<p>This IP Core contains both the HDL and firmware driver needed to realize a pulse width modulation module that's controllable from software. This IP uses the AXI bus to interface between the hardware and software components</p>
						<h3>HDL</h3>
						<p>In the HDL folder you'll find three files:
						<ul>
							<li>pwm_gen.v - The actual logic needed to create a PWM generator</li>
							<li>PWM_Generator_v1_0_S_AXI.v - The auto-generated AXI wrapper for the PWM generator (at line 106 you can see the four registers used to control the PWM generator). At the bottom of that file you'll find where I hook up the registers to the PWM generator. This is needed because the Zynq-7000 chip lets the Processing system interact with the Programmable Logic system through an AXI interface. So, the AXI registers created in this file are mapped into the processor system's memory map for manipulation in software.</li>
							<li>PWM_Generator_v1_0.v - The top level module instantiating and wiring up the PWM_Generator_v1_0_S_AXI (which in turn instantiates pwm_gen).</li>
						</ul>
						</p>
						<p>There are three registers that control the operation of the PWM module:
						<ul>
						<li>load - The value at which the counter will reset to zero and set the output</li>
						<li>compare - The value at which the counter will clear the output</li>
						<li>control - Bit 0: PWM Enable - Output is enabled if this bit is high, disabled otherwise</li>
						</ul>
						</p>

						<p>The PWM module will continuously count up to the "load" value and once it reaches the load value, will loop back to zero. When the counter is at zero, the output is set high. When the PWM module reaches the "compare" value, it clears the output. So the "high" width of the output signal is exactly "compare" clock ticks long (the clock is whatever clock you connect to the IP in your block design, but it will most likely be generated by the Zynq Processing System). The "low" width of the output signal is exactly "load" - "compare" clock ticks long. If you disable the PWM module (by setting bit zero of the control register to zero) then the output will always be low.</p>

						<p>In other words, the "load" register determines your period, while the "compare" register determines your duty cycle.</p>

						<h3>Driver</h3>
						<p>The "PWM_Generator.h" header file contains helpful macros for manipulating the PWM registers while "main.c" gives an example of using those macros. This code would be used in a Xilinx SDK project created for a Zynq design that utilizes the PWM IP.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
